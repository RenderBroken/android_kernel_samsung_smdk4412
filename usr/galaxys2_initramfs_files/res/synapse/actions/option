profile() {
GOVERNOR=$(cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor)
if [ -d "/sys/devices/system/cpu/cpufreq/$GOVERNOR/" ]; then
chmod 0664 /sys/devices/system/cpu/cpufreq/$GOVERNOR/*
	if [[ ! -z $2 ]]; then
		case $2 in
Performance)
 if [ "$GOVERNOR" == "conservative" ];then
    echo "60" > /sys/devices/system/cpu/cpufreq/conservative/up_threshold
    echo "5" > /sys/devices/system/cpu/cpufreq/conservative/sampling_down_factor
    echo "20" > /sys/devices/system/cpu/cpufreq/conservative/down_threshold
    echo "25" > /sys/devices/system/cpu/cpufreq/conservative/freq_step
  fi
  if [ "$GOVERNOR" == "hyper" ];then
    echo "60" > /sys/devices/system/cpu/cpufreq/hyper/up_threshold
  fi
  if [ "$GOVERNOR" == "intellidemand" ];then
    echo "60" > /sys/devices/system/cpu/cpufreq/intellidemand/up_threshold
    echo "2" > /sys/devices/system/cpu/cpufreq/intellidemand/sampling_down_factor
    echo "25" > /sys/devices/system/cpu/cpufreq/intellidemand/down_differential
  fi
  if [ "$GOVERNOR" == "NeoX" ];then
    echo "60" > /sys/devices/system/cpu/cpufreq/neox/up_threshold
    echo "2" > /sys/devices/system/cpu/cpufreq/neox/sampling_down_factor
    echo "15" > /sys/devices/system/cpu/cpufreq/neox/down_differential
    echo "100" > /sys/devices/system/cpu/cpufreq/neox/freq_step
  fi
  if [ "$GOVERNOR" == "ondemand" ];then
    echo "60" > /sys/devices/system/cpu/cpufreq/ondemand/up_threshold
    echo "2" > /sys/devices/system/cpu/cpufreq/ondemand/sampling_down_factor
    echo "15" > /sys/devices/system/cpu/cpufreq/ondemand/down_differential
    echo "100" > /sys/devices/system/cpu/cpufreq/ondemand/freq_step
  fi
  if [ "$GOVERNOR" == "pegasusq" ];then
    echo "60" > /sys/devices/system/cpu/cpufreq/pegasusq/up_threshold
    echo "2" > /sys/devices/system/cpu/cpufreq/pegasusq/sampling_down_factor
    echo "10" > /sys/devices/system/cpu/cpufreq/pegasusq/down_differential
    echo "100" > /sys/devices/system/cpu/cpufreq/pegasusq/freq_step
    echo "10" > /sys/devices/system/cpu/cpufreq/pegasusq/cpu_up_rate
    echo "20" > /sys/devices/system/cpu/cpufreq/pegasusq/cpu_down_rate
  fi
  if [ "$GOVERNOR" == "zzmoove" ];then
  echo "8" > /sys/devices/system/cpu/cpufreq/zzmoove/profile_number
  fi
    ;;

Balanced)
  if [ "$GOVERNOR" == "conservative" ];then
    echo "90" > /sys/devices/system/cpu/cpufreq/conservative/up_threshold
    echo "1" > /sys/devices/system/cpu/cpufreq/conservative/sampling_down_factor
    echo "20" > /sys/devices/system/cpu/cpufreq/conservative/down_threshold
    echo "10" > /sys/devices/system/cpu/cpufreq/conservative/freq_step
  fi
  if [ "$GOVERNOR" == "hyper" ];then
    echo "90" > /sys/devices/system/cpu/cpufreq/hyper/up_threshold
  fi
  if [ "$GOVERNOR" == "intellidemand" ];then
    echo "90" > /sys/devices/system/cpu/cpufreq/intellidemand/up_threshold
    echo "1" > /sys/devices/system/cpu/cpufreq/intellidemand/sampling_down_factor
    echo "20" > /sys/devices/system/cpu/cpufreq/intellidemand/down_differential
  fi
  if [ "$GOVERNOR" == "NeoX" ];then
    echo "90" > /sys/devices/system/cpu/cpufreq/neox/up_threshold
    echo "1" > /sys/devices/system/cpu/cpufreq/neox/sampling_down_factor
    echo "5" > /sys/devices/system/cpu/cpufreq/neox/down_differential
    echo "70" > /sys/devices/system/cpu/cpufreq/neox/freq_step
  fi
  if [ "$GOVERNOR" == "ondemand" ];then
    echo "90" > /sys/devices/system/cpu/cpufreq/ondemand/up_threshold
    echo "1" > /sys/devices/system/cpu/cpufreq/ondemand/sampling_down_factor
    echo "10" > /sys/devices/system/cpu/cpufreq/ondemand/down_differential
    echo "70" > /sys/devices/system/cpu/cpufreq/ondemand/freq_step
  fi
  if [ "$GOVERNOR" == "pegasusq" ];then
    echo "90" > /sys/devices/system/cpu/cpufreq/pegasusq/up_threshold
    echo "2" > /sys/devices/system/cpu/cpufreq/pegasusq/sampling_down_factor
    echo "5" > /sys/devices/system/cpu/cpufreq/pegasusq/down_differential
    echo "70" > /sys/devices/system/cpu/cpufreq/pegasusq/freq_step
    echo "10" > /sys/devices/system/cpu/cpufreq/pegasusq/cpu_up_rate
    echo "20" > /sys/devices/system/cpu/cpufreq/pegasusq/cpu_down_rate
  fi
  if [ "$GOVERNOR" == "zzmoove" ];then
  echo "1" > /sys/devices/system/cpu/cpufreq/zzmoove/profile_number
  fi
  ;;

Battery)
  if [ "$GOVERNOR" == "conservative" ];then
    echo "95" > /sys/devices/system/cpu/cpufreq/conservative/up_threshold
    echo "1" > /sys/devices/system/cpu/cpufreq/conservative/sampling_down_factor
    echo "40" > /sys/devices/system/cpu/cpufreq/conservative/down_threshold
    echo "5" > /sys/devices/system/cpu/cpufreq/conservative/freq_step
  fi
  if [ "$GOVERNOR" == "hyper" ];then
    echo "95" > /sys/devices/system/cpu/cpufreq/hyper/up_threshold
  fi
  if [ "$GOVERNOR" == "intellidemand" ];then
    echo "95" > /sys/devices/system/cpu/cpufreq/intellidemand/up_threshold
    echo "1" > /sys/devices/system/cpu/cpufreq/intellidemand/sampling_down_factor
    echo "5" > /sys/devices/system/cpu/cpufreq/intellidemand/down_differential
  fi
  if [ "$GOVERNOR" == "NeoX" ];then
    echo "95" > /sys/devices/system/cpu/cpufreq/neox/up_threshold
    echo "1" > /sys/devices/system/cpu/cpufreq/neox/sampling_down_factor
    echo "5" > /sys/devices/system/cpu/cpufreq/neox/down_differential
  fi
  if [ "$GOVERNOR" == "ondemand" ];then
    echo "95" > /sys/devices/system/cpu/cpufreq/ondemand/up_threshold
    echo "1" > /sys/devices/system/cpu/cpufreq/ondemand/sampling_down_factor
    echo "5" > /sys/devices/system/cpu/cpufreq/ondemand/down_differential
    echo "10" > /sys/devices/system/cpu/cpufreq/ondemand/freq_step
  fi
  if [ "$GOVERNOR" == "pegasusq" ];then
    echo "95" > /sys/devices/system/cpu/cpufreq/pegasusq/up_threshold
    echo "1" > /sys/devices/system/cpu/cpufreq/pegasusq/sampling_down_factor
    echo "5" > /sys/devices/system/cpu/cpufreq/pegasusq/down_differential
    echo "20" > /sys/devices/system/cpu/cpufreq/pegasusq/freq_step
    echo "15" > /sys/devices/system/cpu/cpufreq/pegasusq/cpu_up_rate
    echo "15" > /sys/devices/system/cpu/cpufreq/pegasusq/cpu_down_rate
  fi
  if [ "$GOVERNOR" == "zzmoove" ];then
  echo "5" > /sys/devices/system/cpu/cpufreq/zzmoove/profile_number
  fi
  ;;
		esac
	fi


	if [ "$GOVERNOR" == "NeoX" ];then
	GOVERNOR=neox
	fi
	if [ "$GOVERNOR" == "zzmoove" ];then
	if grep -q 60 /sys/devices/system/cpu/cpufreq/$GOVERNOR/up_threshold ; then
		echo Performance
	elif grep -q 70 /sys/devices/system/cpu/cpufreq/$GOVERNOR/up_threshold ; then
		echo Balanced
	elif grep -q 75 /sys/devices/system/cpu/cpufreq/$GOVERNOR/up_threshold ; then
		echo Battery
	fi
	fi
	if [ "$GOVERNOR" != "zzmoove" ];then
	if grep -q 60 /sys/devices/system/cpu/cpufreq/$GOVERNOR/up_threshold ; then
		echo Performance
	elif grep -q 90 /sys/devices/system/cpu/cpufreq/$GOVERNOR/up_threshold ; then
		echo Balanced
	elif grep -q 95 /sys/devices/system/cpu/cpufreq/$GOVERNOR/up_threshold ; then
		echo Battery
	fi
	fi
	fi
}


bln() {
	if [[ ! -z $2 ]]; then
		case $2 in
		Steady)
			echo "0" > /sys/class/misc/notification/breathing
			echo "reset" > /sys/class/misc/notification/breathing_steps
			;;
		Breathing)
			echo "1" > /sys/class/misc/notification/breathing
            echo "reset" > /sys/class/misc/notification/breathing_steps
            echo "2600 3300 70 50" > /sys/class/misc/notification/breathing_steps
            echo "3300 2600 70 50" > /sys/class/misc/notification/breathing_steps
            ;;
		Blinking)
			echo "1" > /sys/class/misc/notification/breathing
            echo "reset" > /sys/class/misc/notification/breathing_steps
            echo "2500 2500 1000 100" > /sys/class/misc/notification/breathing_steps
            echo "3300 3300 1000 100" > /sys/class/misc/notification/breathing_steps
            ;;
		esac
	fi
	if grep -q 0 /sys/class/misc/notification/breathing ; then
		echo Steady
	elif grep -q 50 /sys/class/misc/notification/breathing_steps ; then
		echo Breathing
	elif grep -q 1000 /sys/class/misc/notification/breathing_steps ; then
		echo Blinking
	fi
}

log() {
	if [[ ! -z $2 ]]; then
		case $2 in
		Off)
	rm -rf /dev/log
	echo 0 > /sys/module/ump/parameters/ump_debug_level
    echo 0 > /sys/module/mali/parameters/mali_debug_level
    echo 0 > /sys/module/kernel/parameters/initcall_debug
    echo 0 > /sys//module/lowmemorykiller/parameters/debug_level
    echo 0 > /sys/module/earlysuspend/parameters/debug_mask
    echo 0 > /sys/module/alarm/parameters/debug_mask
    echo 0 > /sys/module/alarm_dev/parameters/debug_mask
    echo 0 > /sys/module/binder/parameters/debug_mask
    echo 0 > /sys/module/xt_qtaguid/parameters/debug_mask
			;;
		On)
    echo 1 > /sys/module/alarm/parameters/debug_mask
    ;;
		esac
	fi

	if grep -q 1 /sys/module/alarm/parameters/debug_mask ; then
		echo On
	elif grep -q 0 /sys/module/alarm/parameters/debug_mask ; then
		echo Off
	fi
}

gpsconf() {
	if [[ ! -z $2 ]]; then
	mount -o remount,rw /system
	mount -o remount,rw /data
	echo "NTP_SERVER=$2.ntp.org
XTRA_SERVER_1=http://xtra1.gpsonextra.net/xtra.bin
XTRA_SERVER_2=http://xtra2.gpsonextra.net/xtra.bin
XTRA_SERVER_3=http://xtra3.gpsonextra.net/xtra.bin
SUPL_HOST=supl.google.com
SUPL_PORT=7276" > /system/etc/gps.conf
    cp /system/etc/gps.conf /data/gps.conf
mount -o remount,ro /system
	fi

	if grep -q north-america /system/etc/gps.conf ; then
		echo north-america
	else
	echo $2
	fi
}

charger() {
	if [[ ! -z $2 ]]; then
		case $2 in
  1)
    echo "650 450 450" > /sys/devices/virtual/misc/charge_current/charge_current
    ;;
  2)
    echo "650 650 450" > /sys/devices/virtual/misc/charge_current/charge_current
    ;;
  3)
    echo "650 650 650" > /sys/devices/virtual/misc/charge_current/charge_current
    ;;
	esac
	fi

	current=$(grep -c "650" /sys/devices/virtual/misc/charge_current/charge_current)
	if [ "$current" == "1" ];then
	echo 1
	elif [ "$current" == "2" ];then
	echo 2
	elif [ "$current" == "3" ];then
	echo 3
	fi
	}
	
hotplug_control() {
	if [[ ! -z $2 ]]; then
		case $2 in
  1)
    echo "on" > /sys/devices/virtual/misc/second_core/hotplug_on
    ;;
  2)
    echo "off" > /sys/devices/virtual/misc/second_core/hotplug_on
    echo "off" > /sys/devices/virtual/misc/second_core/second_core_on
    ;;
  3)
    echo "off" > /sys/devices/virtual/misc/second_core/hotplug_on
    echo "on" > /sys/devices/virtual/misc/second_core/second_core_on
    ;;
	esac
	fi

	dynamic=$(cat /sys/devices/virtual/misc/second_core/hotplug_on)
	dual=$(cat /sys/devices/virtual/misc/second_core/second_core_on)
	if [ "$dynamic" == "on" ];then
	echo 1
	elif [ "$dynamic" == "off" ];then
	if [ "$dual" == "off" ];then
	echo 2
	fi
	if [ "$dual" == "on" ];then
	echo 3
	fi
	fi
	}
	
governor() {
	if [[ ! -z $2 ]]; then
  dynamic=$(cat /sys/devices/virtual/misc/second_core/hotplug_on)
  dual=$(cat /sys/devices/virtual/misc/second_core/second_core_on)
  echo "off" > /sys/devices/virtual/misc/second_core/hotplug_on
  echo "on" > /sys/devices/virtual/misc/second_core/second_core_on
		case $2 in
  zzmoove)
    echo "zzmoove" > /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
    ;;
  NeoX)
    echo "neox" > /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
    ;;
  hyper)
    echo "hyper" > /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
    ;;
  pegasusq)
    echo "pegasusq" > /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
    ;;
  conservative)
    echo "conservative" > /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
    ;;
  userspace)
    echo "userspace" > /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
    ;;
  powersave)
    echo "powersave" > /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
    ;;
  ondemand)
    echo "ondemand" > /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
    ;;
  performance)
    echo "performance" > /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
    ;;
	esac
	fi

	echo "$dynamic" > /sys/devices/virtual/misc/second_core/hotplug_on
    echo "$dual" > /sys/devices/virtual/misc/second_core/second_core_on
	governor=$(cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor)
	echo $governor
}

case $1 in

profiles)

if [[ ! -z $2 ]]; then
		profile $1 $2
	else
		profile $1
	fi
	;;

blneffect)

if [[ ! -z $2 ]]; then
		bln $1 $2
	else
		bln $1
	fi
	;;

logs)

if [[ ! -z $2 ]]; then
		log $1 $2
	else
		log $1
	fi
	;;

gps)

if [[ ! -z $2 ]]; then
		gpsconf $1 $2
	else
		gpsconf $1
	fi
	;;

charge)

if [[ ! -z $2 ]]; then
		charger $1 $2
	else
		charger $1
	fi
	;;

hotplug)

if [[ ! -z $2 ]]; then
		hotplug_control $1 $2
	else
		hotplug_control $1
	fi
	;;

governors)

if [[ ! -z $2 ]]; then
		governor $1 $2
	else
		governor $1
	fi
	;;

esac
